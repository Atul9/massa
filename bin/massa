#!/usr/bin/env ruby
# frozen_string_literal: true

require 'optparse'
$LOAD_PATH.push File.expand_path('../../lib', __FILE__)

options = {}

OptionParser.new do |opts|
  opts.banner = 'Usage: massa [options]'

  opts.on('-h', '--help', 'Display this help') do
    puts opts
    exit
  end

  opts.on('-v', '--version', 'Display version') do
    require 'massa/version'
    puts Massa::VERSION
    exit
  end

  opts.on('-V', '--verbose', 'Run verbosely') do |v|
    options[:verbose] = v
  end
end.parse!

require 'massa'

begin
  Massa::Analyzier.run!(options)
rescue Gem::LoadError
  Massa::CLI.colorize :red, "¯\\_(ツ)_/¯ 'massa' gem is not in your Gemfile."
  exit 1
end
